{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vdoc.dev/schemas/vdoc.config.json",
  "title": "vdoc Configuration",
  "description": "Configuration for vdoc multi-language scanning in monorepos",
  "type": "object",
  "required": ["version", "languages"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference for IDE support"
    },
    "version": {
      "type": "string",
      "enum": ["1.0"],
      "description": "Config schema version"
    },
    "languages": {
      "type": "array",
      "description": "Path-to-preset mappings for multi-language support",
      "items": {
        "type": "object",
        "required": ["path", "preset"],
        "properties": {
          "path": {
            "type": "string",
            "description": "Directory path relative to project root (must end with /)",
            "pattern": "^[^/].*/$",
            "examples": ["frontend/", "backend/", "src/api/"]
          },
          "preset": {
            "type": "string",
            "description": "Preset name to use for files in this path",
            "examples": ["typescript", "python", "go", "rust", "java", "default"]
          },
          "exclude": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Additional file patterns to exclude for this path",
            "examples": [["*.generated.ts", "*.mock.ts"]]
          }
        },
        "additionalProperties": false
      },
      "minItems": 1
    },
    "exclude": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Global directory exclusions (in addition to preset defaults)",
      "default": [],
      "examples": [["vendor/", "node_modules/", "dist/", ".git/"]]
    },
    "settings": {
      "type": "object",
      "description": "Global settings overrides",
      "properties": {
        "hashAlgorithm": {
          "type": "string",
          "enum": ["sha256", "sha1", "md5"],
          "default": "sha256",
          "description": "Hash algorithm for file change detection"
        },
        "docstringMaxLines": {
          "type": "integer",
          "minimum": 1,
          "maximum": 50,
          "default": 10,
          "description": "Maximum lines to extract from docstrings"
        },
        "warnUnmappedFiles": {
          "type": "boolean",
          "default": true,
          "description": "Warn when files don't match any configured path"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "version": "1.0",
      "languages": [
        { "path": "frontend/", "preset": "typescript" },
        { "path": "backend/", "preset": "go" },
        { "path": "scripts/", "preset": "python" }
      ],
      "exclude": ["vendor/", "node_modules/"],
      "settings": {
        "docstringMaxLines": 5
      }
    }
  ]
}
